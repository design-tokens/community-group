{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://www.designtokens.org/schemas/2025.10/format/token.json",
  "title": "Token",
  "description": "A token in the DTCG specification",
  "type": "object",
  "properties": {
    "$value": {
      "description": "The token's value - can be a direct value or a reference to another token using curly brace syntax (e.g., '{token.name}'). Mutually exclusive with $ref."
    },
    "$type": {
      "$ref": "tokenType.json"
    },
    "$ref": {
      "$ref": "../format.json#/definitions/jsonPointerReference",
      "description": "JSON Pointer reference (RFC 6901) for advanced referencing. Use this instead of $value for property-level references. Examples: '#/colors/blue/$value' or '#/colors/blue/$value/components/0'. Mutually exclusive with $value."
    },
    "$description": {
      "type": "string",
      "description": "A plain text description of the token"
    },
    "$extensions": {
      "type": "object",
      "description": "Vendor-specific extensions"
    },
    "$deprecated": {
      "oneOf": [
        {
          "type": "boolean"
        },
        {
          "type": "string"
        }
      ],
      "description": "Whether this token is deprecated"
    }
  },
  "additionalProperties": false,
  "allOf": [
    {
      "description": "Tokens cannot define both $value and $ref; they must choose exactly one form of reference or direct value.",
      "if": {
        "required": ["$value"],
        "properties": {
          "$value": true
        }
      },
      "then": {
        "not": {
          "required": ["$ref"],
          "properties": {
            "$ref": true
          }
        }
      },
      "else": {
        "required": ["$ref"],
        "properties": {
          "$ref": true
        }
      }
    },
    {
      "if": {
        "required": ["$type"],
        "properties": {
          "$type": { "const": "color" }
        }
      },
      "then": {
        "properties": {
          "$value": {
            "oneOf": [
              {
                "$ref": "values/color.json"
              },
              {
                "$ref": "../format.json#/definitions/tokenValueReference"
              }
            ]
          }
        }
      }
    },
    {
      "if": {
        "required": ["$type"],
        "properties": {
          "$type": { "const": "dimension" }
        }
      },
      "then": {
        "properties": {
          "$value": {
            "oneOf": [
              {
                "$ref": "values/dimension.json"
              },
              {
                "$ref": "../format.json#/definitions/tokenValueReference"
              }
            ]
          }
        }
      }
    },
    {
      "if": {
        "required": ["$type"],
        "properties": {
          "$type": { "const": "fontFamily" }
        }
      },
      "then": {
        "properties": {
          "$value": {
            "oneOf": [
              {
                "$ref": "values/fontFamily.json"
              },
              {
                "$ref": "../format.json#/definitions/tokenValueReference"
              }
            ]
          }
        }
      }
    },
    {
      "if": {
        "required": ["$type"],
        "properties": {
          "$type": { "const": "fontWeight" }
        }
      },
      "then": {
        "properties": {
          "$value": {
            "oneOf": [
              {
                "$ref": "values/fontWeight.json"
              },
              {
                "$ref": "../format.json#/definitions/tokenValueReference"
              }
            ]
          }
        }
      }
    },
    {
      "if": {
        "required": ["$type"],
        "properties": {
          "$type": { "const": "duration" }
        }
      },
      "then": {
        "properties": {
          "$value": {
            "oneOf": [
              {
                "$ref": "values/duration.json"
              },
              {
                "$ref": "../format.json#/definitions/tokenValueReference"
              }
            ]
          }
        }
      }
    },
    {
      "if": {
        "required": ["$type"],
        "properties": {
          "$type": { "const": "cubicBezier" }
        }
      },
      "then": {
        "properties": {
          "$value": {
            "oneOf": [
              {
                "$ref": "values/cubicBezier.json"
              },
              {
                "$ref": "../format.json#/definitions/tokenValueReference"
              }
            ]
          }
        }
      }
    },
    {
      "if": {
        "required": ["$type"],
        "properties": {
          "$type": { "const": "number" }
        }
      },
      "then": {
        "properties": {
          "$value": {
            "oneOf": [
              {
                "$ref": "values/number.json"
              },
              {
                "$ref": "../format.json#/definitions/tokenValueReference"
              }
            ]
          }
        }
      }
    },
    {
      "if": {
        "required": ["$type"],
        "properties": {
          "$type": { "const": "strokeStyle" }
        }
      },
      "then": {
        "properties": {
          "$value": {
            "oneOf": [
              {
                "$ref": "values/strokeStyle.json"
              },
              {
                "$ref": "../format.json#/definitions/tokenValueReference"
              }
            ]
          }
        }
      }
    },
    {
      "if": {
        "required": ["$type"],
        "properties": {
          "$type": { "const": "border" }
        }
      },
      "then": {
        "properties": {
          "$value": {
            "oneOf": [
              {
                "$ref": "values/border.json"
              },
              {
                "$ref": "../format.json#/definitions/tokenValueReference"
              }
            ]
          }
        }
      }
    },
    {
      "if": {
        "required": ["$type"],
        "properties": {
          "$type": { "const": "transition" }
        }
      },
      "then": {
        "properties": {
          "$value": {
            "oneOf": [
              {
                "$ref": "values/transition.json"
              },
              {
                "$ref": "../format.json#/definitions/tokenValueReference"
              }
            ]
          }
        }
      }
    },
    {
      "if": {
        "required": ["$type"],
        "properties": {
          "$type": { "const": "shadow" }
        }
      },
      "then": {
        "properties": {
          "$value": {
            "oneOf": [
              {
                "$ref": "values/shadow.json"
              },
              {
                "$ref": "../format.json#/definitions/tokenValueReference"
              }
            ]
          }
        }
      }
    },
    {
      "if": {
        "required": ["$type"],
        "properties": {
          "$type": { "const": "gradient" }
        }
      },
      "then": {
        "properties": {
          "$value": {
            "oneOf": [
              {
                "$ref": "values/gradient.json"
              },
              {
                "$ref": "../format.json#/definitions/tokenValueReference"
              }
            ]
          }
        }
      }
    },
    {
      "if": {
        "required": ["$type"],
        "properties": {
          "$type": { "const": "typography" }
        }
      },
      "then": {
        "properties": {
          "$value": {
            "oneOf": [
              {
                "$ref": "values/typography.json"
              },
              {
                "$ref": "../format.json#/definitions/tokenValueReference"
              }
            ]
          }
        }
      }
    },
    {
      "if": {
        "allOf": [
          {
            "not": {
              "required": ["$type"]
            }
          },
          {
            "required": ["$value"]
          },
          {
            "properties": {
              "$value": {
                "not": {
                  "$ref": "../format.json#/definitions/tokenValueReference"
                }
              }
            }
          }
        ]
      },
      "then": {
        "properties": {
          "$value": {
            "oneOf": [
              {
                "$ref": "values/color.json"
              },
              {
                "$ref": "values/dimension.json"
              },
              {
                "$ref": "values/fontFamily.json"
              },
              {
                "$ref": "values/duration.json"
              },
              {
                "$ref": "values/cubicBezier.json"
              },
              {
                "$ref": "values/strokeStyle.json"
              },
              {
                "$ref": "values/border.json"
              },
              {
                "$ref": "values/transition.json"
              },
              {
                "$ref": "values/shadow.json"
              },
              {
                "$ref": "values/gradient.json"
              },
              {
                "$ref": "values/typography.json"
              },
              {
                "anyOf": [
                  {
                    "$ref": "values/number.json"
                  },
                  {
                    "$ref": "values/fontWeight.json"
                  }
                ]
              }
            ]
          }
        }
      }
    }
  ]
}
